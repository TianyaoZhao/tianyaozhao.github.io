# 服务器使用

## vscode

### vscode debug复杂项目

   - 继续/暂停 `F5`：执行到下一个断点
   - 单步跳过 `F10`：从断点处执行单步调试
   - 单步调试 `F11`：进入函数内部
   - 单步跳出 `shift+F11`：跳出函数内部
   - 重启`shift+command+F11`
   - 结束`shift+F5`

1. **最优雅的方式**

    [参考](https://github.com/yuanzhoulvpi2017/vscode_debug_transformers)  [b站视频](https://www.bilibili.com/video/BV1wt421V718/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=ddc3faf2cc3b56c47bf503fde12217e3)

    1. 安装

        1. `pip install debugpy -U`
        2. 安装vscode python相关插件 `Python Debugger`

    2. 写配置

        一般情况下，都是使用`sh xxxx.sh`启动脚本。

        1. 在python代码（最前面添加）

            ```python
            import debugpy
            try:
                # 5678 is the default attach port in the VS Code debug configurations. Unless a host and port are specified, host defaults to 127.0.0.1
                debugpy.listen(("localhost", 9501))
                print("Waiting for debugger attach")
                debugpy.wait_for_client()
            except Exception as e:
                pass
            ```

        2. 在vscode的launch.json的configuratin添加

            ```json
            {
                        "name": "sh_file_debug",
                        "type": "debugpy",
                        "request": "attach",
                        "connect": {
                            "host": "localhost",
                            "port": 9501
                        }
                    },
            ```

            **上面的端口号要保持一致**
            
            ```json
            {
                // 使用 IntelliSense 了解相关属性。 
                // 悬停以查看现有属性的描述。
                // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
                "version": "0.2.0",
                "configurations": [
                    {
                        "name": "Python 调试程序: 当前文件",
                        "type": "debugpy",
                        "request": "launch",
                        "program": "${file}",
                        "console": "integratedTerminal"
                    },
                    {
                        "name": "sh_file_debug",
                        "type": "debugpy",
                        "request": "attach",
                        "connect": {
                            "host": "localhost",
                            "port": 9501
                        }
                    },
                ]
            }
            ```
            
            
    
    3. 启动
    
        1. 正常启动`sh xxx.sh`
        2. 在你需要debug的python文件，打上debug断点
        3. 你看打印出来的东西，是不是出现`Waiting for debugger attach`.一般来说，都很快，就出现了
        4. 再在vscode的debug页面，选择`sh_file_debug`进行debug，**这个就是json文件中的name字段**
        5. **debug结束之后，别忘记把代码里面的 添加的代码，注销掉**



2. 配置json方式

    **python a.py -- args**

    [掌握VSCode远程调试技巧：轻松Debug复杂Python项目_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1794y1B7M5/?spm_id_from=333.337.search-card.all.click&vd_source=ddc3faf2cc3b56c47bf503fde12217e3)

    1. 我的文件树路径，我要对BEVFormer进行Debug

        ![image-20240111102717272](./.assets/image-20240111102717272.png)

    2. 配置launch.json文件

        cwd：是debug时跳转到的目录，以后所有的路径都是基于cwd下的路径

        ```json
        {
            // Use IntelliSense to learn about possible attributes.
            // Hover to view descriptions of existing attributes.
            // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
            "version": "0.2.0",
            "configurations": [
                {
                    "name": "Python: Current File",
                    "type": "python",
                    "request": "launch",
                    "program": "/root/miniconda3/envs/bevformer/lib/python3.8/site-packages/torch/distributed/launch.py",
                    "console": "integratedTerminal",
                    "justMyCode": true,
                    // debug时初始跳转到的目录
                    "cwd": "/root/tianyao/BEVFormer", 
                    //Python 调试配置中传递给 launch.py 脚本的命令行参数
                    "args": [ 
                        // 指定每个节点的进程数为 1，这表明在分布式训练中每个计算节点只运行一个进程
                        "--nproc_per_node=1", 
                        // 指定主进程的端口号，这里设置为 24524。
                        // 在分布式训练中不同的进程需要通过网络通信主端口是协调通信的一种方式
                        "--master_port", 
                        "24524",
                        // 指定要运行的 Python 脚本的路径  从这里往下都是train.py需要传递的参数
                        "./tools/train.py", 
                        //指定训练配置文件的路径
                        "./projects/configs/bevformer/bevformer_base.py", 
                        //指定GPU个数
                        "--gpus", 
                        "1",
                        //指定工作目录
                        "--work-dir", 
                        "./my_work",
                        // 指定启动器，这里是使用 PyTorch 启动器
                        "--launcher", 
                        "pytorch",
                        // 启用确定性训练
                        // 这意味着训练过程将是确定性的，每次运行相同的输入都会产生相同的输出
                        "--deterministic" 
                    ]
                }
            ]
        }
        
        ```

        

3. pdb方式

    在需要打印信息的地方写这个，然后在**控制台执行**	

    ```python
    import pdb;pdb.set_trace()



### vscode 配置远程服务器

ssh config 毫末智行 A100 * 2 160 G显存

数据集：`/mnt/share_disk/wangbin/`



### vscode 配置有代理的服务器

1. 下载nmap

2. 找到nmap中ncat.exe的地址

    ![](./.assets/image-20231129130752996.png)

3. 配置vscode 的sshconfig

### vscode 使用docker的解释器

[Vscode连接远程服务器中的docker容器进行开发（两种方法）_vscode连接远程服务器的docker容器-CSDN博客](https://blog.csdn.net/qq_19716143/article/details/132310200)

1. 设置端口映射

    [docker修改端口映射的三种方法 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/602788610)

    开放服务器端口号

    ![image-20240513151419020](./.assets/image-20240513151419020.png)

2. 启动容器

    ```
    docker run -p 20000:22 -p 8000:8000 -p 10088:10088 --name django_server -itd django_lesson:1.0
    ```

3. 在容器中安装ssh服务

    ```
    apt-get update
    apt-get install openssh-server
    apt-get install openssh-client
    apt-get install ssh
    apt-get install vim
    ```

    

4. 修改ssh信息

    ```
    vim /etc/ssh/sshd_config
    # 在刚刚打开的文件里添加以下内容,保存后退出：
    Port 10008
    PermitRootLogin yes #允许root用户使用ssh登录
    ```

5. 重启ssh服务

    ```
    /etc/init.d/ssh restart
    ```

6. 设置root密码

    ```
    passwd
    ```

7. 设置开机自启动ssh服务

    ```
    # 找到并打开文件/root/.bashrc
    vim /root/.bashrc
    # 在.bashrc末尾添加如下代码
    $ service ssh start
    ```

8. vscode配置ssh

    ![image-20240513151813839](./.assets/image-20240513151813839.png)



## 软链接

**创建软链接**

ln  -s  [源文件或目录]  [目标文件或目录]

例如：

- 当前路径创建test 引向/var/www/test 文件夹 


​	`ln –s  /var/www/test  test`

- 创建/var/test 引向/var/www/test 文件夹 


​	`ln –s  /var/www/test   /var/test` 



运行这条命令后，便在**当前目录**下创建了一个**nuscenes**的文件夹（实则为链接），其中的内容就是/data/nuscenes文件夹下的内容

```bash
ln -s /data/nuscenes nuscenes
```

**软链接删除**

`ls -l`查看链接情况

![image-20231212103524558](./.assets/image-20231212103524558.png)

`rm flower_data`源文件还在





## 常用命令

1. 查看ubuntu版本

    ```bash
    lsb_release -a 
    ```

2. 查看文件占用多大内存

    `du -h [filepath]` 直接得出人好识别的文件大小

    `du [目标目录] -sh`得到目录下总占用内存

    ![image-20240325091236563](./.assets/image-20240325091236563.png)







## Cuda

### 服务器修改cuda版本

**教程链接**

https://zhuanlan.zhihu.com/p/581634820#:~:text=%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AAcuda%E7%89%88%E6%9C%AC%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%87%AA%E7%94%B1%E5%88%87%E6%8D%A2%EF%BC%8C%E4%B8%8D%E5%B9%B2%E6%89%B0%E6%BA%90%E7%8E%AF%E5%A2%83%EF%BC%8C%E4%B8%94%E4%B8%8D%E7%94%A8sudo%E6%8C%87%E4%BB%A4%2C%E6%93%8D%E4%BD%9C%E7%AE%80%E5%8D%95%201%201.%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E5%BB%BA%E7%AB%8B%20%E9%A6%96%E5%85%88%E6%BA%90base%E7%89%88%E6%9C%AC%E4%B8%BA11.6%EF%BC%8C%E7%9B%AE%E6%A0%87%E5%9C%A8conda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%B8%AD%E4%B8%8B%E8%BD%BD%E4%B8%80%E4%B8%AA11.3%E7%9A%84cuda%E7%89%88%E6%9C%AC%20%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BB%A5%E4%B8%8B%E6%8C%87%E4%BB%A4%E6%9F%A5%E7%9C%8B%20nvcc%20-V%20%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83%2C%E6%88%91%E7%9A%84%E5%90%8D%E5%AD%97%E4%B8%BAnerfies_shi%EF%BC%8C%E6%8C%89%E7%85%A7%E8%87%AA%E5%B7%B1%E7%9A%84%E6%94%B9,%E7%BB%99cuda%E6%9D%83%E9%99%90%20chmod%20%2Bx%20cuda_11.3.0_465.19.01_linux.run%20%E8%BF%90%E8%A1%8Crun%E6%96%87%E4%BB%B6%20sh%20cuda_11.3.0_465.19.01_linux.run%20

https://blog.csdn.net/qq_44961869/article/details/115954258

https://blog.csdn.net/zong596568821xp/article/details/80880204

https://blog.csdn.net/qq_35082030/article/details/110387800





**官网**

https://developer.nvidia.com/cuda-11.1.1-download-archive?target_os=Linux&target_arch=x86_64&target_distro=Ubuntu&target_version=2004&target_type=runfilelocal

**最好的教程**

https://blog.csdn.net/qq_35082030/article/details/110387800

**全部版本**

https://developer.nvidia.com/cuda-toolkit-archive  

![](./.assets/image-20240109113322330.png)

mkdir -p  ~/../usr/local/cuda-11.1

sudo sh cuda_11.1.1_455.32.00_linux.run



![](./.assets/image-20240109114302439.png)

![](./.assets/image-20240109114425109.png)

![](./.assets/image-20240109114437604.png)

![](./.assets/image-20240109114445515.png)

![](./.assets/image-20240109114533796.png)



修改bashrc

![image-20240109114832909](./.assets/image-20240109114832909.png)

source .bashrc

sudo /root/miniconda3/envs/monocon/bin/python3.6 setup.py develop

### 服务器的cuda切换

1. 利用如下命令打开环境变量参数

    ```bash
    sudo gedit ~/.bashrc
    ```

2. 写入模板

    ```bash
    export PATH=/usr/local/cuda-版本/bin:$PATH  
    export LD_LIBRARY_PATH=/usr/local/cuda-版本/lib64:$LD_LIBRARY_PATH
    export CUDA_HOME=/usr/local/cuda
    ```

3. 实例

    ```bash
    export PATH=/usr/local/cuda-11.6/bin:$PATH  
    export LD_LIBRARY_PATH=/usr/local/cuda-11.6/lib64:$LD_LIBRARY_PATH
    export CUDA_HOME=/usr/local/cuda
    ```







## 下载相关

### 下载文件

```
wget -c -o [保存的名字] “[下载链接]”

wget -c -o yolov5s.pt "https://github.com/ultralytics/yolov5/releases/download/v5.0/yolov5s.pt"
```

[wget命令使用及参数详解_wget -o和-o区别-CSDN博客](https://blog.csdn.net/u011598193/article/details/99412491)



### 服务器下载miniconda

[Miniconda — miniconda documentation](https://docs.conda.io/projects/miniconda/en/latest/)

```shell
# 在root路径下执行操作
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm -rf ~/miniconda3/miniconda.sh
# 初始化.bashrc
~/miniconda3/bin/conda init bash
```





## 服务器配置

### 配置tmux和vim

#### vim配置

- 安装vim

    ```shell
    sudo apt install vim
    ```

- 新建一个 .vmrc

- 复制保存

    ```shell
    " An example for a vimrc file.
    "
    " To use it, copy it to
    "     for Unix and OS/2:  ~/.vimrc
    "             for Amiga:  s:.vimrc
    "  for MS-DOS and Win32:  $VIM\_vimrc
    "           for OpenVMS:  sys$login:.vimrc
    
    " When started as "evim", evim.vim will already have done these settings.
    if v:progname =~? "evim"
      finish
    endif
    
    " Use Vim settings, rather then Vi settings (much better!).
    " This must be first, because it changes other options as a side effect.
    set nocompatible
    
    " allow backspacing over everything in insert mode
    set backspace=indent,eol,start
    
    if has("vms")
      set nobackup          " do not keep a backup file, use versions instead
    else
      set backup            " keep a backup file
    endif
    set history=50          " keep 50 lines of command line history
    set ruler               " show the cursor position all the time
    set showcmd             " display incomplete commands
    set incsearch           " do incremental searching
    "==========================================================================
    "My Setting-sunshanlu
    "==========================================================================
    vmap <leader>y :w! /tmp/vitmp<CR>
    nmap <leader>p :r! cat /tmp/vitmp<CR>
    
    "语法高亮
    syntax enable
    syntax on
    "显示行号
    set nu
    
    "修改默认注释颜色
    "hi Comment ctermfg=DarkCyan
    "允许退格键删除
    "set backspace=2
    "启用鼠标
    set mouse=a
    set selection=exclusive
    set selectmode=mouse,key
    "按C语言格式缩进
    set cindent
    set autoindent
    set smartindent
    set shiftwidth=4
    
    " 允许在有未保存的修改时切换缓冲区
    "set hidden
    
    " 设置无备份文件
    set writebackup
    set nobackup
    
    "显示括号匹配
    set showmatch
    "括号匹配显示时间为1(单位是十分之一秒)
    set matchtime=5
    "显示当前的行号列号：
    set ruler
    "在状态栏显示正在输入的命令
    set showcmd
    
    set foldmethod=syntax
    "默认情况下不折叠
    set foldlevel=100
    " 开启状态栏信息
    set laststatus=2
    " 命令行的高度，默认为1，这里设为2
    set cmdheight=2
    
    
    " 显示Tab符，使用一高亮竖线代替
    set list
    "set listchars=tab:\|\ ,
    set listchars=tab:>-,trail:-
    
    
    "侦测文件类型
    filetype on
    "载入文件类型插件
    filetype plugin on
    "为特定文件类型载入相关缩进文件
    filetype indent on
    " 启用自动补全
    filetype plugin indent on 
    
    
    "设置编码自动识别, 中文引号显示
    filetype on "打开文件类型检测
    "set fileencodings=euc-cn,ucs-bom,utf-8,cp936,gb2312,gb18030,gbk,big5,euc-jp,euc-kr,latin1
    set fileencodings=utf-8,gb2312,gbk,gb18030
    "这个用能很给劲，不管encoding是什么编码，都能将文本显示汉字
    "set termencoding=gb2312
    set termencoding=utf-8
    "新建文件使用的编码
    set fileencoding=utf-8
    "set fileencoding=gb2312
    "用于显示的编码，仅仅是显示
    set encoding=utf-8
    "set encoding=utf-8
    "set encoding=euc-cn
    "set encoding=gbk
    "set encoding=gb2312
    "set ambiwidth=double
    set fileformat=unix
    
    
    "设置高亮搜索
    set hlsearch
    "在搜索时，输入的词句的逐字符高亮
    set incsearch
    
    " 着色模式
    set t_Co=256
    "colorscheme wombat256mod
    "colorscheme gardener
    "colorscheme elflord
    colorscheme desert
    "colorscheme evening
    "colorscheme darkblue
    "colorscheme torte
    "colorscheme default
    
    " 字体 && 字号
    set guifont=Monaco:h10
    "set guifont=Consolas:h10
    
    " :LoadTemplate       根据文件后缀自动加载模板
    "let g:template_path='/home/ruchee/.vim/template/'
    
    " :AuthorInfoDetect   自动添加作者、时间等信息，本质是NERD_commenter && authorinfo的结合
    ""let g:vimrc_author='sunshanlu'
    ""let g:vimrc_email='sunshanlu@baidu.com'
    ""let g:vimrc_homepage='http://www.sunshanlu.com'
    "
    "
    " Ctrl + E            一步加载语法模板和作者、时间信息
    ""map <c-e> <ESC>:AuthorInfoDetect<CR><ESC>Gi
    ""imap <c-e> <ESC>:AuthorInfoDetect<CR><ESC>Gi
    ""vmap <c-e> <ESC>:AuthorInfoDetect<CR><ESC>Gi
    
    
    
    " ======= 引号 && 括号自动匹配 ======= "
    "
    ":inoremap ( ()<ESC>i
    
    ":inoremap ) <c-r>=ClosePair(')')<CR>
    "
    ":inoremap { {}<ESC>i
    "
    ":inoremap } <c-r>=ClosePair('}')<CR>
    "
    ":inoremap [ []<ESC>i
    "
    ":inoremap ] <c-r>=ClosePair(']')<CR>
    "
    ":inoremap < <><ESC>i
    "
    ":inoremap > <c-r>=ClosePair('>')<CR>
    "
    "":inoremap " ""<ESC>i
    "
    ":inoremap ' ''<ESC>i
    "
    ":inoremap ` ``<ESC>i
    "
    ":inoremap * **<ESC>i
    
    " 每行超过80个的字符用下划线标示
    ""au BufRead,BufNewFile *.s,*.asm,*.h,*.c,*.cpp,*.java,*.cs,*.lisp,*.el,*.erl,*.tex,*.sh,*.lua,*.pl,*.php,*.tpl,*.py,*.rb,*.erb,*.vim,*.js,*.jade,*.coffee,*.css,*.xml,*.html,*.shtml,*.xhtml Underlined /.\%81v/
    "
    "
    " For Win32 GUI: remove 't' flag from 'guioptions': no tearoff menu entries
    " let &guioptions = substitute(&guioptions, "t", "", "g")
    
    " Don't use Ex mode, use Q for formatting
    map Q gq
    
    " This is an alternative that also works in block mode, but the deleted
    " text is lost and it only works for putting the current register.
    "vnoremap p "_dp
    
    " Switch syntax highlighting on, when the terminal has colors
    " Also switch on highlighting the last used search pattern.
    if &t_Co > 2 || has("gui_running")
      syntax on
      set hlsearch
    endif
    
    " Only do this part when compiled with support for autocommands.
    if has("autocmd")
    
      " Enable file type detection.
      " Use the default filetype settings, so that mail gets 'tw' set to 72,
      " 'cindent' is on in C files, etc.
      " Also load indent files, to automatically do language-dependent indenting.
      filetype plugin indent on
    
      " Put these in an autocmd group, so that we can delete them easily.
      augroup vimrcEx
      au!
    
      " For all text files set 'textwidth' to 80 characters.
      autocmd FileType text setlocal textwidth=80
    
      " When editing a file, always jump to the last known cursor position.
      " Don't do it when the position is invalid or when inside an event handler
      " (happens when dropping a file on gvim).
      autocmd BufReadPost *
        \ if line("'\"") > 0 && line("'\"") <= line("$") |
        \   exe "normal g`\"" |
        \ endif
    
      augroup END
    
    else
    
      set autoindent                " always set autoindenting on
    
    endif " has("autocmd")
    
    " 增加鼠标行高亮
    set cursorline
    hi CursorLine  cterm=NONE   ctermbg=darkred ctermfg=white
    
    " 设置tab是四个空格
    set ts=4
    set expandtab
    
    " 主要给Tlist使用
    let Tlist_Exit_OnlyWindow = 1
    let Tlist_Auto_Open = 1
    
    ```

#### tmux配置

- 安装tmux

    ```shell
    sudo apt-get install tmux
    ```

- 不要着急进tmux

- 新建一个 .tmux.conf

    ```shell
    set-option -g status-keys vi
    setw -g mode-keys vi
    
    setw -g monitor-activity on
    
    # setw -g c0-change-trigger 10
    # setw -g c0-change-interval 100
    
    # setw -g c0-change-interval 50
    # setw -g c0-change-trigger  75
    
    
    set-window-option -g automatic-rename on
    set-option -g set-titles on
    set -g history-limit 100000
    
    #set-window-option -g utf8 on
    
    # set command prefix
    set-option -g prefix C-a
    unbind-key C-b
    bind-key C-a send-prefix
    
    bind h select-pane -L
    bind j select-pane -D
    bind k select-pane -U
    bind l select-pane -R
    
    bind -n M-Left select-pane -L
    bind -n M-Right select-pane -R
    bind -n M-Up select-pane -U
    bind -n M-Down select-pane -D
    
    bind < resize-pane -L 7
    bind > resize-pane -R 7
    bind - resize-pane -D 7
    bind + resize-pane -U 7
    
    
    bind-key -n M-l next-window
    bind-key -n M-h previous-window
    
    
    
    set -g status-interval 1
    # status bar
    set -g status-bg black
    set -g status-fg blue
    
    
    #set -g status-utf8 on
    set -g status-justify centre
    set -g status-bg default
    set -g status-left " #[fg=green]#S@#H #[default]"
    set -g status-left-length 20
    
    
    # mouse support
    # for tmux 2.1
    # set -g mouse-utf8 on
    set -g mouse on
    #
    # for previous version
    #set -g mode-mouse on
    #set -g mouse-resize-pane on
    #set -g mouse-select-pane on
    #set -g mouse-select-window on
    
    
    #set -g status-right-length 25
    set -g status-right "#[fg=green]%H:%M:%S #[fg=magenta]%a %m-%d #[default]"
    
    # fix for tmux 1.9
    bind '"' split-window -vc "#{pane_current_path}"
    bind '%' split-window -hc "#{pane_current_path}"
    bind 'c' new-window -c "#{pane_current_path}"
    
    # run-shell "powerline-daemon -q"
    
    # vim: ft=conf
    
    ```

    

### 换源

1. anaconda换源

    https://blog.csdn.net/moshiyaofei/article/details/122058922

2. pip换源

    https://blog.csdn.net/limengshi138392/article/details/111315014





### PYTHONPATH

修改.bashrc文件，设置PYTHON的工作路径

`:`是分隔符，可以填入多个PYTHONPAYTH

```shell
export PYTHONPATH=/root/tianyao/BEVFormer:$PYTHONPATH
```

也可以临时导入

```shell
export PYTHONPATH=/root/tianyao/BEVFormer
```



### 一键配置conda openmmlab环境

基于服务器cuda 11.1 -python 3.8

```shell
conda create -n project python=3.8
pip install torch==1.9.0+cu111 torchvision==0.10.0+cu111 torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html
pip install mmcv-full==1.6.0 -f https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.1/index.html
pip install mmdet==2.24.0
pip install mmsegmentation==0.24.0
pip install numba==0.53.0 numpy==1.23.4 nuscenes-devkit==1.1.11 pandas==2.0.3 scikit-image===0.19.3 scipy==1.10.1 setuptools==59.5.0 tensorboardX
```







## Git

### git clone历史版本代码

**第一种方法**

1. clone最新版本

    ![image-20231207120903195](./.assets/image-20231207120903195.png)

2. 查看历史版本id号

    ![image-20231207120927591](./.assets/image-20231207120927591.png)

3. `git checkout id`

    切换到当前分支

**第二种方法**

```bash
git clone https://mirror.ghproxy.com/https://github.com/ultralytics/yolov5.git -b v5.0
```

**第三种方法**

```bash
git clone https://mirror.ghproxy.com/https://github.com/ultralytics/yolov5.git
cd yolov5
git checkout v5.0


```

### git上传大文件 >100MB

### git设置clash代理

参考知乎

[解决 Github port 443 : Timed out - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/636418854)

```shell
# 取消代理
git config --global --unset http.proxy
git config --global --unset https.proxy

# 查看代理
git config --global --get http.proxy
git config --global --get https.proxy
```



因为用clash，设置clash代理

```bash
git config --global http.proxy 127.0.0.1:7890
git config --global https.proxy 127.0.0.1:7890
```

速度飞起！

### 两台电脑同步git

1. 检查电脑是否有`id_rsa、id_rsa.pub`密钥生成

   ```shell
   ls ~/.ssh
   ```

2. 如果没有，生成新的密钥，一直回车默认即可

   ```shell
   ssh-keygen -t rsa -C "你的邮箱"
   ```

3. 查看公钥

   ```shell
   cat ~/.ssh/id_rsa.pub
   ```

   ![image-20240327173038028](.assets/image-20240327173038028.png)

4. 将公钥复制到github上，实现同步

   ![image-20240327173135924](.assets/image-20240327173135924.png)



## 数据集下载

### nuscenes数据集下载

1. 登录官网[nuScenes](https://www.nuscenes.org/nuscenes)

![](./.assets/image-20231129133153988.png)



2. 从官网获取下载链接，写入脚本`nuscenes.sh`

    （这个链接几天更新一次，所以不能经常用，得更换）

    **注意：vim脚本向下打几个回车，不然会吞掉第一个wget**

```shell
wget -c -O v1.0-trainval_meta.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval_meta.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=kokRnDkRz1jy3iq7oixPlq%2FePoI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668356"
wget -c -O v1.0-trainval01_blobs.tar "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval01_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=FSUTV61285rBghAhtO231%2BfiMzI%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668375"
wget -c -O v1.0-trainval02_blobs.tar "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval02_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=17Rz6BRm8BEqChr%2FuS361odUMz8%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668394"
wget -c -O v1.0-trainval03_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval03_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=LlTK7oflOOEIbRc9g2oiZ%2Fv35zU%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668405"
wget -c -O v1.0-trainval04_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval04_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=oV3VprFxu1zcERGRMxAyJpQmLdU%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668432"
wget -c -O v1.0-trainval05_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval05_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=phtsSl1B6v6hC81p8GnZDeKn%2FF8%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668442"
wget -c -O v1.0-trainval06_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval06_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=6OLO6Sx%2FixOY2xgJsjba2VcLRZ4%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668477"
wget -c -O v1.0-trainval07_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval07_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=dO5ImdQAiLbV9lgkTopHDSOhRMc%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668505"
wget -c -O v1.0-trainval08_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval08_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=k3D8YThbaXjxvD2jw4ORBwCHuf8%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668515"
wget -c -O v1.0-trainval09_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval09_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=%2BMsiH9zsdW0MmfE0vZvozpT3QL0%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668528"
wget -c -O v1.0-trainval10_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-trainval10_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMEZVQSHGH&Signature=gcdBXGDL1rLvDr%2FEmN2wt0RNAnA%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJIMEYCIQDYSFf669tSVA078drpV90pqDQedTmrUsqjsh093rFzpwIhALWN8tGIAhbT%2FWS7M%2FDwvTt5Od4UVQ066nXCPK1pNSWEKv0CCM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQBBoMOTk5MTM5NjA5Njg4IgxG3iMxsFnLZwkuD7Mq0QKIkr5ksHhDDWPsU1LSNON3Mgf0utli73g4VhnF7EWs6uRxhVEWmm2xUcJ2oUdnTDWy6jW3IGwZx4WKKZf1cQ1sfDNSwZ5PcOAwnKqRDXMfTW%2BuhZ0yuvNsPFZf8JHjn%2FUS9RMJGfvqr7IZAWpePPt2eyJ12JTxRuJOr9mnCLQJ2d8AUMaftEEXkQPcISJ9q53W3YHp3l835ioaDZCg966zrpfoL59RecVVMT1Id4rB%2BdN%2BXCFWd7iUBvtskdTzae34hnUibgnKTyrJOL2aSyWrE2JTl2IQVzZaHYycwWdpmJkwuj%2Bx7LcMNect63h3KTV053z8rCDQ%2BReOnMd3i2KZnYg5C6aznqYgjQ9IzM%2B%2BDzua2TxuN7JnA53FoJ4wOR1iufncNGX5ZaDMDGTEoXwtgyFq5n7cEgqiPxRmjJJCRBuoRILX%2Bw4DQAxZSZXrsq%2BsMKuUm6sGOp0BCaB2M7Fm8chD%2BxybQocvGPWkql8j4l4Ek332SMRjve0YcYCFCx7HkkGdwSHTBmd3pV0jqyPlIsvctwcZirGlgzg4mTZD65h6uR7dYpq%2FscWzEO63f9mkvVm%2BX8P%2BQeNBz0a4BwV4wLjKbvn2LC9AC%2FTlm1YyWBit2qZ%2B717wNqsxURkfF2O%2FDpPGDNV71UxMLh8Uo2AZXxxLqiM7ew%3D%3D&Expires=1701668537"

wget -c -O v1.0-test_meta.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-test_meta.tgz?AWSAccessKeyId=ASIA6RIK4RRMFWUAB3PV&Signature=TFE8yharGpqxEecQktn7sMto8w0%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJHMEUCIBSRc8QUocIGbRdjsv8l3qokyqnV9QJ7FH1wxYNnzVlIAiEAqlNtDdFqc8ljLZ0rD4JA03LXvLDNn10S6ninKgP05BMq%2FQIIz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAEGgw5OTkxMzk2MDk2ODgiDFu6ZGBYp7DxUqeHqyrRAqXNw4xeyQFGFM4Dk%2BSPqWrJY6AholJvWk%2F%2BUHGBifLZ3ZIdJ2Y%2BP6I17BnAsmt1hhf3%2Ba9eV%2BacvhRIsbc9xgOqMws10ewCEvwU9lf3%2F3sC2t5dGFPaXP1CvqJjxFeqz24BvQglqWrb9MDN3KKAGE8cdo6iOlO5avXfkVbB7gsJRd5cP0%2FZI7NcRHBhSYnWT9p3B5R2QxKRJRMEyLUNq4eXlrCTeD3W11vbF7nGnBpnYemb1YkK9raZcA1w4UOxvcx9u0kRpUaq26G9Kj4HVhfCSwUeJuhkaZLIz0FXdFoQq%2FiwHcrkbR1PM7S1jkc4XIwKIq8bTmwZO0vS%2BYpRXBzdLE7iNCjulfnWEudAByRDAr9eMlrslTyRq85iSNJCcucr7IXxsjb5rPFcOa4XZnBMJA25GI%2B%2BK%2FWUnMCY5BKwa2%2FxiB5hpwE5iXCoJObm9XIwuZ6bqwY6ngFZbUH9zhnEU4BG%2BGTLtVXI1ihXmiqYZ20PenWPEFbBnIZUWcTPBWXYp56AIR5hMmmN0jzWLluytGbvW73mQ5goorTVZQ3wUtaldcmBghIW%2BErYZQcwg8ff5rYXuthPYBliHvlDABQgBwscE0c6aQkGyM%2Fdlq7LJ6jzR0OHdOLG3jBXyoGF3F8kVXpPjxmvwW4ds%2BxYYI%2BzxMXhLoe8cg%3D%3D&Expires=1701668548"
wget -c -O v1.0-test_blobs.tgz "https://s3.ap-southeast-1.amazonaws.com/asia.data.nuscenes.org/public/v1.0/v1.0-test_blobs.tgz?AWSAccessKeyId=ASIA6RIK4RRMFWUAB3PV&Signature=L%2F2kRslBJVUqc4UMBVY312QNVfs%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEHYaCXVzLWVhc3QtMSJHMEUCIBSRc8QUocIGbRdjsv8l3qokyqnV9QJ7FH1wxYNnzVlIAiEAqlNtDdFqc8ljLZ0rD4JA03LXvLDNn10S6ninKgP05BMq%2FQIIz%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAEGgw5OTkxMzk2MDk2ODgiDFu6ZGBYp7DxUqeHqyrRAqXNw4xeyQFGFM4Dk%2BSPqWrJY6AholJvWk%2F%2BUHGBifLZ3ZIdJ2Y%2BP6I17BnAsmt1hhf3%2Ba9eV%2BacvhRIsbc9xgOqMws10ewCEvwU9lf3%2F3sC2t5dGFPaXP1CvqJjxFeqz24BvQglqWrb9MDN3KKAGE8cdo6iOlO5avXfkVbB7gsJRd5cP0%2FZI7NcRHBhSYnWT9p3B5R2QxKRJRMEyLUNq4eXlrCTeD3W11vbF7nGnBpnYemb1YkK9raZcA1w4UOxvcx9u0kRpUaq26G9Kj4HVhfCSwUeJuhkaZLIz0FXdFoQq%2FiwHcrkbR1PM7S1jkc4XIwKIq8bTmwZO0vS%2BYpRXBzdLE7iNCjulfnWEudAByRDAr9eMlrslTyRq85iSNJCcucr7IXxsjb5rPFcOa4XZnBMJA25GI%2B%2BK%2FWUnMCY5BKwa2%2FxiB5hpwE5iXCoJObm9XIwuZ6bqwY6ngFZbUH9zhnEU4BG%2BGTLtVXI1ihXmiqYZ20PenWPEFbBnIZUWcTPBWXYp56AIR5hMmmN0jzWLluytGbvW73mQ5goorTVZQ3wUtaldcmBghIW%2BErYZQcwg8ff5rYXuthPYBliHvlDABQgBwscE0c6aQkGyM%2Fdlq7LJ6jzR0OHdOLG3jBXyoGF3F8kVXpPjxmvwW4ds%2BxYYI%2BzxMXhLoe8cg%3D%3D&Expires=1701668559"

```



3. 执行下载

    ```bash
    tmux            # 开tmux下载，因为下载时间太久
    mkdir -p ~/datasets/nuscenes
    vim nuscenes.sh # 将上面的粘贴进去
    sh nuscenes.sh  # 开始下
    ```

4. 下载示意

![](./.assets/image-20231129135143440.png)

5. 挂起tmux

    ctrl + a d

6. 下载完成之后得到下面的文件

![image-20231130111821046](./.assets/image-20231130111821046.png)

7. 解压操作，在当前`/datasets/nuscenes`目录下，执行`nuscenes_unzip.sh`

    `tar zxvf [文件名.tgz] -C ./`

    ```shell
    tar zxvf v1.0-trainval_meta.tgz -C ./
    tar zxvf v1.0-trainval01_blobs.tar -C ./
    tar zxvf v1.0-trainval02_blobs.tar -C ./
    tar zxvf v1.0-trainval03_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval04_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval05_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval06_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval07_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval08_blobs.tgz -C ./ 
    tar zxvf v1.0-trainval09_blobs.tgz -C ./
    tar zxvf v1.0-trainval10_blobs.tgz -C ./ 
    
    tar zxvf v1.0-test_meta.tgz -C ./
    tar zxvf v1.0-test_blobs.tgz -C ./
    
    ```

    

8. 删除多余的压缩包和sh文件 `remove.sh`

    ```shell
    rm v1.0-trainval_meta.tgz
    rm v1.0-trainval01_blobs.tar 
    rm v1.0-trainval02_blobs.tar 
    rm v1.0-trainval03_blobs.tgz 
    rm v1.0-trainval04_blobs.tgz 
    rm v1.0-trainval05_blobs.tgz 
    rm v1.0-trainval06_blobs.tgz 
    rm v1.0-trainval07_blobs.tgz
    rm v1.0-trainval08_blobs.tgz 
    rm v1.0-trainval09_blobs.tgz 
    rm v1.0-trainval10_blobs.tgz
    
    rm v1.0-test_meta.tgz 
    rm v1.0-test_blobs.tgz 
    rm nuscenes.sh
    rm nuscenes_unzip.sh
    ```

    

9. 删除remove.sh

    ```shell
    rm remove.sh
    ```

10. 目录树

![image-20231130163510821](./.assets/image-20231130163510821.png)

### KITTI数据集下载

文件内容（老师scp传给我的文件 嘿嘿！！）

```
data_object_calib.zip  data_object_image_2.zip  data_object_image_3.zip  data_object_label_2.zip  data_object_velodyne.zip  train_planes.zip
```

**解压**

```shell
#可选,另一个视角的摄像头照片
unzip data_object_image_3.zip
#可选,道路平面信息，其在训练过程中作为一个可选项，用于提升模型性能
unzip train_planes.zip
```



1. 把这些文件放在同一个文件夹下，路径为 `~/datasets/kitti/`
2. 在上述路径执行下面脚本`kitti_unzip.sh`

```bash
unzip data_object_calib.zip
unzip data_object_image_2.zip
unzip data_object_label_2.zip  
unzip data_object_velodyne.zip  
```

3. 创建数据集的所有编号文档 data split，在上面路径下执行下面脚本`create_split.sh`

可能会被墙，我电脑上有（直接copy进去），这里面存了数据集的编号

![](./.assets/image-20231130105305602.png)

```bash
mkdir -p ./ImageSets
# Download data split
wget -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/test.txt --no-check-certificate --content-disposition -O ./ImageSets/test.txt
wget -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/train.txt --no-check-certificate --content-disposition -O ./ImageSets/train.txt
wget -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/val.txt --no-check-certificate --content-disposition -O ./ImageSets/val.txt
wget -c  https://raw.githubusercontent.com/traveller59/second.pytorch/master/second/data/ImageSets/trainval.txt --no-check-certificate --content-disposition -O ./ImageSets/trainval.txt
```



4. 删除压缩包，sh文件，以及不需要的可选的压缩包 `remove.sh`

```bash
rm data_object_calib.zip  
rm data_object_image_2.zip  
rm data_object_image_3.zip  
rm data_object_label_2.zip  
rm data_object_velodyne.zip  
rm train_planes.zip
rm kitti_unzip.sh
rm create_split.sh
```

5. 删除`remove.sh`

```bash
rm  remove.sh
```

6. 文件组织好是这个样子

![](./.assets/image-20231130105119070.png)



7. **软链接**，处理标签数据

（对软连接后的文件进行修改**相当于在原来的目录下修改**）

现在我的数据集源文件在目录`~/datasets/kitti`下

现在项目需要数据集在目录`mmdetection3d/data/kitti`下

因此我 `cd mmdetection3d/data`

```shell
ln  -s  [源文件或目录]  [目标文件或目录]
cd ~/mmdetection3d/data
# 当前路径创建kitti 引向 ~/datasets/kitti 文件夹 
ln -s ~/datasets/kitti ./kitti
```



8. 软链接删除

    `ls -l`查看链接情况

    ![image-20231212103524558](./.assets/image-20231212103524558-1711340360922-14.png)

    `rm flower_data`源文件还在





## 依赖包下载

### MMCV安装

**一定要把cuda版本切换过来**，不然会卡住

要source一下

![image-20231130121258348](./.assets/image-20231130121258348.png)

用pip安装，指定mmcv版本

```bash
pip install mmcv-full -f https://download.openmmlab.com/mmcv/dist/[cuda_version]/[torch version]/index.html
# 例如，我的服务器是cuda11.6 torch是1.12.0
pip install mmcv-full -f https://download.openmmlab.com/mmcv/dist/cu116/torch1.12.0/index.html
```

pip install mmcv-full==1.5.0 -f https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.1/index.html

**mmcv与cuda对应**

### torch本地安装

https://download.pytorch.org/whl/torch_stable.html

pip install 对应的包即可

### torch和torch.lighting对应版本关系

[Versioning Policy — PyTorch Lightning 2.2.0dev documentation](https://lightning.ai/docs/pytorch/latest/versioning.html)

# 
